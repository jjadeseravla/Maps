<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <!-- <link rel="stylesheet" type="text/css" href="styles.css"/> -->
    <script src="svg-pan-zoom.js"></script>
      <!-- <script src="scripts/snap.svg-min.js"></script> -->
      <script src="http://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
      <script src="main.js">

      </script>
      <link rel="stylesheet" href="styles.css">
  </head>
  <body>

    <div class="searchbar">
      <input id="myInput" type="text" placeholder="What are you looking for?">
      <button onclick="validateUserInput()">Search</button>
    </div>
    <p id="searchWord"></p>

    <div class="controls">
      <button id="zoom-in">+</button>
      <button id="zoom-out">-</button>
      <button id="reset">Reset</button>
    </div>

    <div class="readXml">
      <!-- <button id="button2">read XML</button> -->
      <button id="button1">Get Jade</button>
      <div id="user"></div>
      <br><br>
      <div id="text"></div>

    </div>

    <svg class="us" height="830" width="1440" viewBox="0, 0, 600, 200" style="border: solid 1px blue;">


      <g class="group">
      <rect id="box1" x="50" y="20" width="200" height="100" stroke="#000000" onclick="alert('click!')"/>
    </g>
    <g class="group2">
      <rect id="groupee2" x="350" y="10" width="300" height="150" stroke="#000000" onclick="myFunction()"/>
    </g>
    <g class="group3">
      <rect x="250" y="0" width="100" height="250" stroke="#000000"/>
    </g>
    <!-- <g class="group4">
      <rect x="250" y="-5" width="100" height="250" stroke="#000000"/>
    </g> -->
    <g class="group5">
      <!-- <circle cx="50" cy="50" r="50" fill="orange" /> -->
      <rect x="360" y="30" rx="10" ry="10" width="60" height="60" stroke="orange" onclick="redZone()"/>
    </g>

    <!-- <animate xlink:href="#box1" attributeName="fill" from="#538B93" to="#0F5156" dur="1s" repeatCount="indefinite" />  -->
    </svg>

    <div id="myDIV" class="textBox" style="display:none;">
      <img src="images/sophie.jpg" style="margin:auto; width:200px;display:block" />
      <h3>Welcome to the Earth Hall!</h3>
      <p>Meet our incredible dinosaur specimen, the most intact Stegosaurus fossil skeleton ever found.</p>
      <p>Sophie is three metres tall and almost six metres long, but wasn't even fully grown when they died.</p>
      <p>Here you can explore gems and minerals.  See if you find a piece of moon rock!</p>
      <p>The escalator takes you through a giant metallic globe to the upper Red Zone galleries.</p>
      <!-- <input class="finish" type="button" value="X" onclick="exit()"> -->
      <button class="close" onclick="exit()">X</button>
    </div>

    <div id="red" class="textBox" style="display:none;">
      <img src="images/redZone.jpg" style="margin:auto; width:200px;display:block" />
      <h3>Lasting Impressions, Red Zone</h3>
      <p>Examine remarkable fossil evidence of long-ago events in the Last Impressions gallery.</p>
      <p>From 200-million-year-old wave ripples on beach sand to a petrified tree stump, dinosaur footprints
        and a giant ammonite.  The past is imprinted on all these gallery speicimens.</p>
      <button id="closeBox"class="close" onclick="exit()">X</button>
    </div>

    <div id="whatsOnToday" >
      <h2>What's on today</h2>
      <p>Earth hall</p>
      <button id="button" onclick="loadText()">Get XML data</button>

        <button type="button" name="button" onclick="myFunction()">Find on Map</button><br>
    </div>

    <script>

    var panZoom = svgPanZoom('.us', {
        zoomEnabled: true,
        controlIconsEnabled: false
      });
      document.getElementById('zoom-in').addEventListener('click', function(ev){
        ev.preventDefault()
        panZoom.zoomIn()
      });
      document.getElementById('zoom-out').addEventListener('click', function(ev){
        ev.preventDefault()
        panZoom.zoomOut()
      });
      document.getElementById('reset').addEventListener('click', function(ev){
        ev.preventDefault()
        panZoom.resetZoom()
      });

    </script>

  </body>

  <script>

    //create event listener
    document.getElementById('button').addEventListener('click', loadText);

    window.onload = function() {
       loadText();
    }

    function loadText() {
      //create XHR object
      var xhr = new XMLHttpRequest();

      //OPEN - type, url/file, async
      xhr.open("GET", "visitorfeed.xml", true);

      xhr.onload = function() {
        if(this.status == 200) {
          // var items = JSON.parse(this.responseText);
          // console.log(this.responseText);
          xmlDoc = $.parseXML( this.responseText ),
          //this.responseText = $( xmlDoc ),
          $xml = $( xmlDoc )
          itemArray = $xml.find( "item" );
          console.log('READYSTATE: ', xhr.readyState);

          //for loop Here
           // var arr = [];
           var toAdd = document.createDocumentFragment();
           var eventContainer = document.getElementById("whatsOnToday");
           for ( var i = 0; i < itemArray.length; i++) {
             var newDiv = document.createElement('div');
             newDiv.id = 'event'+i;
             newDiv.className = 'whatsOnEventItem';
             var image = $($xml.find( "item" )[i]).find("image_url")[0].innerHTML;
             newDiv.innerHTML += "<img src=" + image + " />";
             var name = $($xml.find( "item" )[i]).find("name")[0].innerHTML;
             newDiv.innerHTML += "<h3>" + name + "</h3>";
             var category = $($($xml.find( "item" )[i]).find("categories")[0]).find("category")[0].innerHTML;
             newDiv.innerHTML += "<h4>Event Type: " + category + "</h4>";
             toAdd.appendChild(newDiv);
           }
           eventContainer.appendChild(toAdd);


           // var image = $($xml.find( "item" )[10]).find("image_url")[0].innerHTML;
           // document.getElementById("demo").innerHTML = "<img src=" + image + " />";
           // var name = $($xml.find( "item" )[10]).find("name")[0].innerHTML;
           // document.getElementById("nameTitle").innerHTML = name;

          //console.log(firstItem = $xml.find( "item" )[0]); //-good
          //console.log('url:' + firsItem.innerHTML);
           //$($xml.find( "item" )[10]).find("name")[0].innerHTML; // - good   sensational butterflies

          //var output = "";
          // for(var i in items) {
          //   output +=
          //   '<div class="item">' +
          //   'img src="'+items[i].url+'" width="70" height="70">'}
          //document.getElementById('text').innerHTML = this.responseText;
          //document.getElementById('items').innerHTML = output;
        }
        //return arr[i];
      }
      xhr.send();
    }
</script>

</html>
